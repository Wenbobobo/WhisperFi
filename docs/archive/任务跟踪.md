# Private Defi - 任务跟踪

本文件用于跟踪项目的整体进度，确保我们按照既定计划，一步步地、踏实地完成所有任务。

## 第一阶段：黑客松 MVP (最小可行产品)

**目标:** 在有限时间内，展示项目的核心价值——非托管的隐私 DeFi 代理交易。
**建议方案:** 混合方案B的理念和方案A的实现。

---

### **任务 1: 核心 ZK 电路设计 (使用 Circom & SnarkJS)**
*   **状态:** ⏳ 未开始
*   **负责人:** Gemini
*   **子任务:**
    *   [ ] **1.1: `Deposit` 电路:**
        *   输入: 私密票据 (amount, asset, owner, salt)
        *   输出: 票据哈希 (commitment)
    *   [ ] **1.2: `Withdraw` 电路:**
        *   输入: 旧票据, Merkle 证明, nullifier, 提款地址
        *   功能: 验证票据所有权，防止双花
    *   [ ] **1.3: `Trade` 电路 (MVP 核心):**
        *   输入: 旧票据, Merkle 证明, nullifier, 新票据 (找零), 交易指令哈希
        *   功能: 验证所有权, 验证状态转换, 验证交易指令
        *   **简化目标:** 交易指令可简化为“向地址 X 转账 Y 金额”，专注于 ZK 逻辑。

---

### **任务 2: 智能合约开发 (使用 Solidity & Hardhat)**
*   **状态:** ⏳ 未开始
*   **负责人:** Gemini
*   **子任务:**
    *   [ ] **2.1: `PrivacyPool.sol` 合约:**
        *   [ ] 实现 `deposit` 函数，存储 commitment。
        *   [ ] 实现 `trade` 函数，接收 ZK 证明和公开输入。
        *   [ ] 实现 `withdraw` 函数。
    *   [ ] **2.2: `Verifier.sol` 合约生成与集成:**
        *   从 `snarkjs` 导出 `trade` 电路的验证者合约。
        *   在 `PrivacyPool.sol` 中集成验证逻辑。
    *   [ ] **2.3: 模拟执行代理:**
        *   在 `trade` 函数验证成功后，直接调用外部协议（如 Uniswap 的 `swap` 函数），`msg.sender` 为 `PrivacyPool.sol` 自身。

---

### **任务 3: 前端用户界面 (使用 React/Next.js & Ethers.js)**
*   **状态:** ⏳ 未开始
*   **负责人:** Gemini
*   **子任务:**
    *   [ ] **3.1: 主密钥管理:**
        *   生成/管理��户的主密钥（为简化，可暂存 `localStorage`）。
    *   [ ] **3.2: 核心用户流程界面:**
        *   [ ] 存款界面 (输入金额)。
        *   [ ] 交易界面 (输入交易指令)。
        *   [ ] 提款界面。
    *   [ ] **3.3: 浏览器内 ZK 证明生成:**
        *   集成 `snarkjs` 在前端为 `trade` 操作生成证明。
        *   使用 Web Worker 防止 UI 阻塞。

---

### **任务 4: 技术教程与文档编写**
*   **状态:** ⏳ 未开始
*   **负责人:** Gemini
*   **子任务:**
    *   [ ] **4.1: 创建文档基本结构**
    *   [ ] **4.2: ZK 模块教材**
        *   [ ] `1-what-is-zk.md`
        *   [ ] `2-core-concepts.md`
        *   [ ] `3-zk-snarks.md`
        *   [ ] `4-our-circuits.md`
    *   [ ] **4.3: AA 模块教材**
        *   [ ] `1-what-is-aa.md`
        *   [ ] `2-erc4337.md`
        *   [ ] `3-user-journey.md`
        *   [ ] `4-our-stack.md`
